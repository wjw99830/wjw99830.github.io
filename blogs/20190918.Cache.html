<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>实现Vue Function-based API</title>
  <link rel="stylesheet" href="../css/main.css">
</head>
<body>
  <h1>前端性能优化 - Cache</h1>
  <h2>本地数据存储（WebStorage）</h2>
  <hr />
  <p>会话级存储：SessionStorage。在一个窗口关闭后数据清空，多个窗口不会共享数据，即使同源。</p>
  <p>持久化存储：LocalStorage。除非手动清空数据，否则数据将会一直存在，以域的级别隔离数据。</p>
  <p>两种存储的API基本相同：</p>
  <pre>Storage.get
Storage.set
Storage.clear
...</pre>
  <h2>Memory Cache</h2>
  <hr />
  <p>浏览器针对同个文档中的多个相同资源请求进行的优化，无相关标准定义其行为。</p>
  <h2>Cache API</h2>
  <hr />
  <p>借助Service Worker对请求进行拦截，在回调函数中可查看请求的资源是否命中缓存，如果没有可以继续发起请求，否则直接返回缓存，该缓存也是持久化的，类似LocalStorage。</p>
  <h2>HTTP 缓存</h2>
  <hr />
  <h3>强缓存</h3>
  <p>HTTP响应头中增加Cache-Control字段，其中可以设置max-age指定缓存有效时间，Expires指定一个过期时间，浏览器会将其与本地时间进行对比决定是否使用缓存。</p>
  <h3>协商缓存</h3>
  <p>响应头增加Last-Modified字段表示最后一次资源更新的时间，下次请求时在头部中增加If-Modified-Since字段（其值为Last-Modified的值），若服务端返回304则使用缓存，否则返回200更新资源。</p>
  <p>响应头增加E-Tag字段作为资源内容的标识（MD5），请求时将其值作为字段If-None-Match，若值不匹配则更新资源。</p>
  <h2>Push Cache</h2>
  <hr />
  <p>Push Cache是HTTP/2的一个特性，在获取文档的同时发送一些后续会使用到的资源，例如css、js，这种方式的缓存有效时间较短。</p>
</body>
</html>